<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
<input type="file" id="imageInput" multiple>
<button id="saveBtn">Képek mentése</button>

<div id="gallery"></div>

</body>
<script>
document.getElementById("saveBtn").addEventListener("click", () => {
  const files = document.getElementById("imageInput").files;
  if (!files.length) return alert("Válassz ki legalább egy képet!");

  const readers = [];
  const imagesArray = [];

  // Minden fájlt base64-re alakítunk
  for (let file of files) {
    readers.push(
      new Promise((resolve) => {
        const reader = new FileReader();
        reader.onload = (e) => {
          imagesArray.push(e.target.result);
          resolve();
        };
        reader.readAsDataURL(file);
      })
    );
  }

  // Ha minden kép betöltődött
  Promise.all(readers).then(() => {
    localStorage.setItem("myImages", JSON.stringify(imagesArray));
    renderGallery(imagesArray);
  });
});

function renderGallery(images) {
  const gallery = document.getElementById("gallery");
  gallery.innerHTML = "";

  images.forEach((src) => {
    const img = document.createElement("img");
    img.src = src;
    img.width = 150;
    img.style.margin = "5px";
    gallery.appendChild(img);
  });
}

</script>
</html>